# Choosing and sourcing parts
Sometimes, you don't have much of a choice. If you only work with AVRs (that's pretty much the case for myself, because I have dreams in AVR assembly at this point; think "the matrix"), it's not hard to go from project requirements to the necessary part number for the microconctroller; that's covered elsewhere. But what about everything else? Once you've picked them, where to source them? What should you source from digikey or other reputable suppliers in the western world? What should you buy straight from china to save a bundle?

I will cover these in reverse order, as the "where to source" will (eventually) be a lot shorter than my suggestions about parts.

## Sourcing
Some things, only a madman or someone with more money than sense would buy from those "reputable western distributors" - they can be sourced direct from China with little sacrifice except shipping time from AliExpress, eBay international sellers, or other such marketplaces. There are other things that only madman or an "easy mark"`*` would buy from China direct, and which is better bought through reputable western distributors or the manufacturer directly. It's actually pretty straightforward.

One thing to remember is that the slope of the price vs quantity graph is far shallower over there (no clue why - I know it's not when you're having them make custom PCBAs. It may just be that the marketplace sellers buy everything by the reel, and are just competing with each other on price, so the prices of any quantity tends towards the unit price in reel-quantities). While the premium that Digikey demands for one of something is often eye-watering, the discounts to be had on AliExpress from buying a thousand of something instead of 5 or 10 are small, sometimes almost non-existant!

Another thing to remember is that 1-3% of packages go missing in the best of times. Sometimes the seller will reship or refund them, other times you get nothing but broken english and broken promises. If you actually receive the item (not some other item with the same tracking number pasted on it - which has happeneed to me; I got some cheap women's swimware instead of a roll of wire), you will have a really hard time getting a refund if it turns out to be crap. Don't make purchases that you can't afford to eat the cost of.

`*` An "Easy Mark" is con-man lingo for someone who's going to be easy to rob.
### Integrated Circuits
It's usually pretty simple to determine where to buy the IC's you need.

When it's manufactuered by a western company, unless it's so old that the datasheets you see are scanned in from the original papyrus scrolls (only a slight exaggeration - you know the type of datasheet I'm talking about, IC designed in the late 70's or early 80's, barely readable with the content all crooked)... you should probably get them from a western distributor. Aliexpress et. al. is where you get fake ICs that don't work correctly. When the IC is so cheap from Digikey that it's not worth their time to rip off, there is often little to be saved. I know with a good deal of confidence that AVR microcontrollers, when sold as the bare chip, should be avoided. I've heard of ATtiny13's sold as ATtiny85's (with the part number having been ground off and ATtiny85 inscribed in it's place!), and mysterious "ATtiny412" devices that belived that they were ATtiny416's and acted like it (if you want my guess, they were a factory screwup that was thrown away, and then retrived by someone picking through the factory's waste, and sold on to the poor victims overseas via aliexpress sellers who had no idea they were bad). "Atmega328p" parts have been made from discarded preproduction IC's with nothing to do with AVRs, and in some cases, chips have been sold that are just an encapsulated leadframe (no silicon die involved).

In many of these cases, it seems like a crooked middleman is buying a bunch of something that doesn't work, in the same package as something in high demand, on the surplus market, and grinding the serial number off, and selling it to unsophisticated AliExpress vendors who unwittingly resell them. The real criminal, living well outside of the juristiction of any of the people actually harmed by the chips (you can bet they wouldn't try to pull that scam on anyone who wasn't exporting the chips!). This relies on the aliexpress vendors being unsophisticated, and that's why this problem is extremely severe for bare chips, but rarely an issue for microcontroller boards. Anyone can download the Arduino IDE, plug a couple boards from the new batch in and upload blink. Likely the board manufacturers do this with some of the new copies of a PCB. Similarly, the even the sellers (some of whom are just an individual or a couple - storefronts selling electronics or carparts, and nailpolish and makeup - that kind of odd pairing of a masculine and a feminine set of products is the signature of the husband/wife or bf/gf aliexpress buisness) who stock Arduino clones are typically competent enough to plug a board in and upload blink to it, and if none of the boards in a batch work - they don't want a bunch of 1-star feedback, so they go complain to the crook who sold it to them. So arduino clone boards = yes, the bare chips on an arduino clone board = no.

There's one exception to the rule on "western manufacturers' parts" and that is when the western manufacturer has (or for a part that several manufacturers make several have) discontinued or marked it NRND, and it's getting hard to get for a reasonable price in the west (or at all). Sometimes, upon searching the market place sites, you will find a great abundance of them at a bargain basement price - they may be getting phased out in the west, but they're still in widespread use in China and the rest of the world. Either the design is being ripped off by some other fab (in which case they generally work - they're being made not to dupe foreigners, but rather to replace the no longer made original for equipment destined for china or the third world) -  or some warehouse in China got stuck with a huge inventory of them when the western buyers stopped buying them.

On the other hand, unless you read Chinese, if you want an IC made by a Chinese company (they do have a lot of very good parts. Rarely highly sophiisticated ones, but many desirable straightforward parts. USB-serial adapters, LED drivers, that sort of thing). If you want a CH4340N to add USB-serial functionality to the design that you're hand soldering - you generally don't get the option of buying anywhere other than the direct-from-China marketplaces, since the western vendors don't sell them, and the big chinese vendors focus on the domestic market. Most of the chinese IC's are so cheap they're not worth counterfeiting anyway.

Finally, *don't ever buy an "IC Kit" for hobbyists*. Most of the IC's in those are junk that you'll never use, and nearly all of them are obsolete). They're not even cheap if you were going to use all the damned parts in them (probably because anyone damned fool enough to buy one doesn't know what anything is worth either), but in reality, you'd be lucky to ue even a handful of them (actually, you'd be even luckier if you discover before you picked up the soldering iron, that these parts were designed when dinosaurs roamed the earth, and for a better price, you could have snagged some newer parts that to the same thing whilest being better in every way.

## Passsives
In my experience, though the prices on ebay and aliexpress sound lovely.... if you do the math and buy the same amount, often they'r comparable to Digikey, Mouser, etc on stuff like reistors and ceramic caps.

There is very little need to buy tantalum caps these days, and the China discount is fairly small (not only are they mostly superfluous, the tantalum that they get their name from is a conflict mineral mined under deplorable conditions in subsaharan Africa, and the proceeds help to immiserate a continent that that frankly has more than its share of misery to begin with). For ceramic capacitors, I can't remember seeing a discount of more than 50%, and the specs on the China-Direct ones were dubious (the temperature coefficient? Rarely specified. And you can just forget about the DC-bias behavior specs). Aluminum electroyltics are often cheaper direct from china in the event that you need large bulk capacitors; don't count on them lasting as long as something from a western electronics supplier, but they're typically good enough. For resistors, there are sometimes discounts to be found in larger package (higher power dissipation) resistors, both SMD and through-hole, and you can sometimes get killer deals on whole reels.

Kits (that is, for example "30 values of resistors 10 pcs per value" are usually cheaper from China. (Resistor, capacitor, and LED kits are useful, particularly if new to the hobby or if you realize you don't have a great selection, or that your parts are ancient - your selection of resistors is encapsulated in bakelite and manufactured in the 60's, and the leads don't even fit into prototyping board made these days, you have only light-bulbs instead of LEDs, and your capacitors - all electrolytic - have all dried out and are either shorts, opens, or visibly broken). The kits have only minor cost disadvantage.

SMD crystals (the small ones. eg, 5032 and smaller) are available from china for a fraction of what you have to pay in the West. (4:1 to 6:1 is common!) Unfortunately, they don't come with specs most of the time other than the frequency. Load capacitance? Nope, even if you ask them, they don't know (consistent with my "the sellers on marketplaces are often clueless" theory). The price differential is often so large though, that it's worth getting them from aliexpress, accepting that you'll have to do some trial and error to find the load right load capacitor values (I mean, more than usual, unless you're one of those people who calculates out the exact load capacitor values before building anything. I'm not convinced anyone actually does that, based on the fact that every source seems to give a different formula, and none of them work consistently. \o/ And naturally, you'll never know whether they're rated to work in the freezer at -20C  or at 90C right above the furnace (so get western ones if you need that sort of functioanlity). But they're like 10 cents instead of 50 to 80 cents, when you're buying 20-50 of them that's the difference between a cup of coffee and a nice dinner at a resteraunt. Ocillators (or "active crystals" as many listings refer to them as) cost a fortune no matter where you buy them. They're a little cheaper from china, but they don't even know the operating voltage. Notethat there are no oscillators in production to my knowledge that output relevant system clock speeds fror AVRs and work across the 1.8-5.5v range since Kyocera discontinued the only such parts in 2020.

## Connectors, switches, and project boxes
The prices in china *bury* the western suppliers. You want to get those from China. Electromechanical gizmos and purely mechanical stuff is invariably cheaper from the chiense vendors, *often by an order of magnitude*. This plays to their strengths.

## LEDs
As with electromechanical stuff, LEDs are virtually always cheaper to get direct from china, and the price differeces are among the largest I've seen for electronics, probably the largest. I cannot fathom who the hell is paying Digikey and their suppliers 50+ cents for a single SMD LED instead of buying it for half a cent from China, but it's apparently enough to justify the catalog space they take up. 1206 LEDs were the first part that I bought a full reel of. They wound up being so insanely cheap that I was like "screw remembering to restock LEDs" and snagged a reel each of the colors I use.

## Discrete semiconductors
"And now, ladies and gentlemen, let's be extra careful, as we're about to walk onto the casino floor..."
Discrete semiconductors - that is, diodes, transistors, and the like - are one of the few cases where there isn't an obvious right answer on where to get them - the savings from getting them, direct can be incredible (order of magnitude is not uncommon). One has to assume that these parts must be fake (either that, or there's some other funny business happening; for example, MicroCommercialCorp (MCC `**`) has a long-standing practice of recycling the part numbers of major manufacturrers, particuluarly Vishay, for their knockoffs). On the other hand, sometimes it makes a lot of sense when the savings is large, your use case not particularly demanding, and when you are able to sanity check the quality of the parts and absorb the cost it they're crap.

With that warning out of the way, particularly for cheap, low end parts, direct from china is great. You want 100 basic schottky signal diodes for barely over a penny each shipped? No problem, are you sure you don't want 300 for a penny each instead? There is a widely-copied dual signal diode in SOT-23which I use in many of my designs (since 2021, this replaced the SOD-123 signal diodes in new designs) because they're just as low in cost and easier to place and solder than other packages (they don't wobble on their leads like SOD-123 can). I don't know who makes the ones I'm using now, and I don't really care, but they most certainly didn't come from digikey....

Never buy a "transistor kit" or "diode kit". Not from anywhere. Those kits are for the easy marks - they almost invariably are filled with obsolete and nearly obsolete parts (ex, power darlingtons, which were pretty cool 30-40 years ago but are blown away by rice-grain sized MOSFET now) and/or with many varieties of nearly identical part (For example. those diode ktis containing 1N4001, 1N4002. 1N4003, through 1N4007) which could be replaced by a single one. I have seen kits that did have decent parts in them, it's true - but still, I'd look down the list and see a pack of a dozen types of MOSFET... and almost half of them could be matched with a comparable part from the list and and dropped from the kit without making it any less useful, while huge swathes of the parameter space of readily available parts were missing from the selection. There's no need for that! Maybe I should buy a bunch of cheap organizer boxesm and a couple hundred pieces each of a selection of *good* transistors, pay someone to kit them out, and try selling those.


### Zener Diodes
Do buy a Zener Diode kit friom China. They're dirt cheap, and you never know when you'll need a zener diode for some purpose or another. You will probably never need a 47V zener, or even a 30V one. But the voltages below 12v, are quite useful. Aliexpress is also where you buy small through-hole Zener diodes (the most commonly used type). For larger or surface mount ones, the prices get a closer, and the

#### Wait, what exactly are "Zener" diodes?
A zener diode looks a lot like a signal diode. They will conduct like a normal diode if forward biased (generally with lower current ratings than diodes of similar size. But that's not how you are supposed to use them. What's special about Zener diodes is that, when reverse biased, they are basically non-conductive.... until the voltage across them reaches the "Zener Voltage" (also "Zener Breakdown Voltage" or "Zener Knee") At that point, they suddenly start conducting readily. If you have nothing to limit the current through them, it doesn't take too much current to smoke them (like a LED, only moreso). But you dont's do that - (consider that 47v zener diode. For every 1mA through it, it's dissipating 43mW. If it's the most common size of zener diode, 0.5W, 12 milliamps through it would damage it. On the other hand, a 5.1v zener could take nearly 100 mA().

There are a couple of useful things you can do with a zener diode:
1. With a resistor limiting current, they can be used as a very crude, very cheap way to get a reference voltage (for example, to use the analog comparator on parts without a DACREF feature, or for use with external comparators like an LM339-alike).
2. If you don't need much current and you size the resistor correctly, you can even use them to make a crude, inefficient, but very cheap low current regulator.
3. If you are interfacing with a higher voltage and you need to use it as an input to your microcontroller, but the "high" level of the voltage is not known in advance, other than that it's going to be somewhere between VIH<sub>min</sub> and some voltage higher than your microcontroller can take, while the low voltage is known to be below VIL<sub>max</sub>. You can't use a resistor divide. (for example, say you knew the "high" could vary between 8 and 20v, while the LOW was always around 0V. You can't use a resistor divider here, because if you divided by 4, the low end of high would read as low, but if you divided by less, the high end of the range coould damage the microcontroller. So you might use a 4.7 or 5.1V zener diode as the low side of the divider, and someting in the 10k range as the high side, and that would turn 0 to 8-20v logic into 0-5V logic. Matters less on modern AVRs, since there the internal protection diodes can take significantly more current - and on the low side, on some of the newer parts, there's an option to change to "TTL" logic levels, which changes the thresholds to 0.8V and 2.0V); matters much more on parts known to be unusually sensitive voltage, or whose protection diodes don't protect very well: Riding the protection diodes generally leads to voltages 0.3-0.5V higher than Vcc, while a zener can clamp it to almost whatver voltage you want
4. a variation on the above, the zener diode can be used place of the high side resistor instead. Helpful if the voltage is much higher than your chip's voltage (say, 20V is LOW, 24V is HIGH. A 19V zener and an appropriate resistor lets you knock that down to 1V and 5V. You can't do *that* with a voltage divider!
5. You can also use them to generate output safe for lower voltage parts: A zener diode with a Zener voltage safe for the target chip, and a resistor sized apprpropriately can be used for this purpose, and can supply more current (if needed) when the signal is high, since the current siphoned off by the Zener is nearly zero below the zener voltage.
5. They are one way of clamping positive spikes that might otherwise damage hardware - best used with a low value resistor and in series on the side from whence the spikes come from, and a small capacitor (this a chance to use up those capacitors in your capacitor kit with less-useful values that are too low to be useful for decoupling, but too high to be a crystal loading cap).

As is suggested by the above, the most useful among them being 5.1V and 3.3V. These are incredibly useful if you're getting spikes at transitions that are causing problems for downstream devices, or in combination with a suitable resister are incredibly useful for clamping voltage spikes. Did you know that just a few feet of wire between your microcontroller and something it's driving with PWM, if that thing has a high impedance, can result in spikes several volts higher than the voltage your micro is running from?


`**` MCC is actually not a bad company, technically speaking. I don't know where or how they got their trench MOSFET fabrication technology, but it's damned nice. Their low Vgs offerings are particularly impressive - the Rds(on) is top tier. Gate capacitance is too - except you want very low gate capacitance; MCC's gate capacitance tends to be quite high. Hence they're not so great for PWM without a gate driver. But for turning things on and off, and low frequency PWM or use with a gate driver, they are on a par with western semiconductor makers.


## Favorites and recommendations
### Tact pushbuttons
The 3x6mm ones are my usual go to, the ones that normally hae either a white or red button. EziUsin on Aliexpress has them in all the colors of the rainbow for only a small premium (and other sellers have them for exorbitant premiums. If I need a tall button, I use the 6 x 6 mm ones (which are available in heights in excess of 24mm), while if board space is an issue, there are some nice 3x3mm buttons with a few heights (nothing particularly tall). If you really want a satisfying tactile button-press, there is a scaled up version of the 6x6mm ones in 12x12mm, (though they're bulky and expensive). You can get all manner of bizarro buttons, but.... why....? These are common, cheap, and durable. Many buttons from China... they've generally got "cheap" down, and often common as well, but many buttons leave much to be desired on the durability front (I think most of us have opened up a new Pro Mini or nano clone, only to have the reset button fall off in out hand).

Super-thin buttons have poor tactile feedback, I succest avoiding them unless your realy need them,

### Switches
I very often use MSK-02C02 and MSK-0302, sometimes even the much harder to get MSK-04C01, if I want a surface mount edge launch switch. These have one problem though: It is very easy to get rubbing alchol with dissolved flux into the inside of the switch while you're cleaning the board. This will foul the switch. Try to avoid letting solvent flow past the switch after the passing over the board. There seems to be a real dearth of SMT alternatives though.


### Serial Adapters
(if designing your own)
* CH340 for basic serial adapting. (N, B, or G)
* CH342 for a dual adapter with VIO pin to set logic levels to anything betweeen 1.8 and 5.5V.
* CH343 for the sinle-port version of the CH342.

The CH340 parts are easy - very easy - to design for. Very few external parts are needed, easily soldered packages, and largely free of silicon bugs.

### USB Hubs
We all need USB hubs. Have you noticed that some USB 3.x hubs have problems talking to VUSB parts? This is frequently reported. So you want a USB 2.0 hub. Unfortunately when you go to buy one from Amazon et al, 2.0 hubs are uncommon, and the ones you can get are of dismal quality, with short lifespans and lowere qualirt save two ovfer
